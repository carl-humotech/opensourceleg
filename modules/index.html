
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="An open-source software library for numerical computation, data acquisition, and control of lower-limb robotic prostheses.">
      
      
        <meta name="author" content="Open-Source Leg">
      
      
        <link rel="canonical" href="https://neurobionics.github.io/opensourceleg/modules/">
      
      
        <link rel="prev" href="..">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>Modules - opensourceleg</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#opensourceleg.actuators" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="opensourceleg" class="md-header__button md-logo" aria-label="opensourceleg" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            opensourceleg
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Modules
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/neurobionics/opensourceleg" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    neurobionics/opensourceleg
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="opensourceleg" class="md-nav__button md-logo" aria-label="opensourceleg" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    opensourceleg
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/neurobionics/opensourceleg" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    neurobionics/opensourceleg
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Modules
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Modules
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators" class="md-nav__link">
    <span class="md-ellipsis">
      actuators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase" class="md-nav__link">
    <span class="md-ellipsis">
      ActuatorBase
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ActuatorBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.output_position" class="md-nav__link">
    <span class="md-ellipsis">
      output_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.output_velocity" class="md-nav__link">
    <span class="md-ellipsis">
      output_velocity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.set_joint_direction" class="md-nav__link">
    <span class="md-ellipsis">
      set_joint_direction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.set_joint_position_offset" class="md-nav__link">
    <span class="md-ellipsis">
      set_joint_position_offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.set_joint_zero_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_joint_zero_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.set_motor_position_offset" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_position_offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.set_motor_zero_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_zero_position
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorConnectionException" class="md-nav__link">
    <span class="md-ellipsis">
      ActuatorConnectionException
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ActuatorConnectionException">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorConnectionException--attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorStreamException" class="md-nav__link">
    <span class="md-ellipsis">
      ActuatorStreamException
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ActuatorStreamException">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorStreamException--attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator" class="md-nav__link">
    <span class="md-ellipsis">
      DephyActuator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DephyActuator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.accelx" class="md-nav__link">
    <span class="md-ellipsis">
      accelx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.accely" class="md-nav__link">
    <span class="md-ellipsis">
      accely
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.accelz" class="md-nav__link">
    <span class="md-ellipsis">
      accelz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.battery_current" class="md-nav__link">
    <span class="md-ellipsis">
      battery_current
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.battery_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      battery_voltage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.encoder_map" class="md-nav__link">
    <span class="md-ellipsis">
      encoder_map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.genvars" class="md-nav__link">
    <span class="md-ellipsis">
      genvars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.gyrox" class="md-nav__link">
    <span class="md-ellipsis">
      gyrox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.gyroy" class="md-nav__link">
    <span class="md-ellipsis">
      gyroy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.gyroz" class="md-nav__link">
    <span class="md-ellipsis">
      gyroz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.joint_encoder_counts" class="md-nav__link">
    <span class="md-ellipsis">
      joint_encoder_counts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.joint_torque" class="md-nav__link">
    <span class="md-ellipsis">
      joint_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.motor_encoder_counts" class="md-nav__link">
    <span class="md-ellipsis">
      motor_encoder_counts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.motor_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      motor_voltage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.thermal_scaling_factor" class="md-nav__link">
    <span class="md-ellipsis">
      thermal_scaling_factor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.winding_temperature" class="md-nav__link">
    <span class="md-ellipsis">
      winding_temperature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.home" class="md-nav__link">
    <span class="md-ellipsis">
      home
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.make_encoder_map" class="md-nav__link">
    <span class="md-ellipsis">
      make_encoder_map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_current_gains" class="md-nav__link">
    <span class="md-ellipsis">
      set_current_gains
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_encoder_map" class="md-nav__link">
    <span class="md-ellipsis">
      set_encoder_map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_impedance_gains" class="md-nav__link">
    <span class="md-ellipsis">
      set_impedance_gains
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_joint_torque" class="md-nav__link">
    <span class="md-ellipsis">
      set_joint_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_motor_current" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_current
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_motor_impedance" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_impedance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_motor_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_motor_torque" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_motor_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_voltage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_output_impedance" class="md-nav__link">
    <span class="md-ellipsis">
      set_output_impedance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_output_torque" class="md-nav__link">
    <span class="md-ellipsis">
      set_output_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_position_gains" class="md-nav__link">
    <span class="md-ellipsis">
      set_position_gains
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator" class="md-nav__link">
    <span class="md-ellipsis">
      DephyLegacyActuator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DephyLegacyActuator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.accelx" class="md-nav__link">
    <span class="md-ellipsis">
      accelx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.accely" class="md-nav__link">
    <span class="md-ellipsis">
      accely
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.accelz" class="md-nav__link">
    <span class="md-ellipsis">
      accelz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.battery_current" class="md-nav__link">
    <span class="md-ellipsis">
      battery_current
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.battery_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      battery_voltage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.case_temperature" class="md-nav__link">
    <span class="md-ellipsis">
      case_temperature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.genvars" class="md-nav__link">
    <span class="md-ellipsis">
      genvars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.gyrox" class="md-nav__link">
    <span class="md-ellipsis">
      gyrox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.gyroy" class="md-nav__link">
    <span class="md-ellipsis">
      gyroy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.gyroz" class="md-nav__link">
    <span class="md-ellipsis">
      gyroz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.joint_encoder_counts" class="md-nav__link">
    <span class="md-ellipsis">
      joint_encoder_counts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.joint_position" class="md-nav__link">
    <span class="md-ellipsis">
      joint_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.joint_torque" class="md-nav__link">
    <span class="md-ellipsis">
      joint_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.joint_velocity" class="md-nav__link">
    <span class="md-ellipsis">
      joint_velocity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_acceleration" class="md-nav__link">
    <span class="md-ellipsis">
      motor_acceleration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_encoder_counts" class="md-nav__link">
    <span class="md-ellipsis">
      motor_encoder_counts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_position" class="md-nav__link">
    <span class="md-ellipsis">
      motor_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_torque" class="md-nav__link">
    <span class="md-ellipsis">
      motor_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_velocity" class="md-nav__link">
    <span class="md-ellipsis">
      motor_velocity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      motor_voltage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.winding_temperature" class="md-nav__link">
    <span class="md-ellipsis">
      winding_temperature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.set_motor_current" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_current
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.set_motor_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.set_motor_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_voltage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ThermalModel" class="md-nav__link">
    <span class="md-ellipsis">
      ThermalModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ThermalModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ThermalModel.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ThermalModel.update_and_get_scale" class="md-nav__link">
    <span class="md-ellipsis">
      update_and_get_scale
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.deprecated_with_routing" class="md-nav__link">
    <span class="md-ellipsis">
      deprecated_with_routing
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators" class="md-nav__link">
    <span class="md-ellipsis">
      actuators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase" class="md-nav__link">
    <span class="md-ellipsis">
      ActuatorBase
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ActuatorBase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.output_position" class="md-nav__link">
    <span class="md-ellipsis">
      output_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.output_velocity" class="md-nav__link">
    <span class="md-ellipsis">
      output_velocity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.set_joint_direction" class="md-nav__link">
    <span class="md-ellipsis">
      set_joint_direction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.set_joint_position_offset" class="md-nav__link">
    <span class="md-ellipsis">
      set_joint_position_offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.set_joint_zero_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_joint_zero_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.set_motor_position_offset" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_position_offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorBase.set_motor_zero_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_zero_position
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorConnectionException" class="md-nav__link">
    <span class="md-ellipsis">
      ActuatorConnectionException
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ActuatorConnectionException">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorConnectionException--attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorStreamException" class="md-nav__link">
    <span class="md-ellipsis">
      ActuatorStreamException
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ActuatorStreamException">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ActuatorStreamException--attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator" class="md-nav__link">
    <span class="md-ellipsis">
      DephyActuator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DephyActuator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.accelx" class="md-nav__link">
    <span class="md-ellipsis">
      accelx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.accely" class="md-nav__link">
    <span class="md-ellipsis">
      accely
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.accelz" class="md-nav__link">
    <span class="md-ellipsis">
      accelz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.battery_current" class="md-nav__link">
    <span class="md-ellipsis">
      battery_current
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.battery_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      battery_voltage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.encoder_map" class="md-nav__link">
    <span class="md-ellipsis">
      encoder_map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.genvars" class="md-nav__link">
    <span class="md-ellipsis">
      genvars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.gyrox" class="md-nav__link">
    <span class="md-ellipsis">
      gyrox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.gyroy" class="md-nav__link">
    <span class="md-ellipsis">
      gyroy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.gyroz" class="md-nav__link">
    <span class="md-ellipsis">
      gyroz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.joint_encoder_counts" class="md-nav__link">
    <span class="md-ellipsis">
      joint_encoder_counts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.joint_torque" class="md-nav__link">
    <span class="md-ellipsis">
      joint_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.motor_encoder_counts" class="md-nav__link">
    <span class="md-ellipsis">
      motor_encoder_counts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.motor_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      motor_voltage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.thermal_scaling_factor" class="md-nav__link">
    <span class="md-ellipsis">
      thermal_scaling_factor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.winding_temperature" class="md-nav__link">
    <span class="md-ellipsis">
      winding_temperature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.home" class="md-nav__link">
    <span class="md-ellipsis">
      home
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.make_encoder_map" class="md-nav__link">
    <span class="md-ellipsis">
      make_encoder_map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_current_gains" class="md-nav__link">
    <span class="md-ellipsis">
      set_current_gains
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_encoder_map" class="md-nav__link">
    <span class="md-ellipsis">
      set_encoder_map
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_impedance_gains" class="md-nav__link">
    <span class="md-ellipsis">
      set_impedance_gains
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_joint_torque" class="md-nav__link">
    <span class="md-ellipsis">
      set_joint_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_motor_current" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_current
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_motor_impedance" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_impedance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_motor_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_motor_torque" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_motor_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_voltage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_output_impedance" class="md-nav__link">
    <span class="md-ellipsis">
      set_output_impedance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_output_torque" class="md-nav__link">
    <span class="md-ellipsis">
      set_output_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyActuator.set_position_gains" class="md-nav__link">
    <span class="md-ellipsis">
      set_position_gains
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator" class="md-nav__link">
    <span class="md-ellipsis">
      DephyLegacyActuator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DephyLegacyActuator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.accelx" class="md-nav__link">
    <span class="md-ellipsis">
      accelx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.accely" class="md-nav__link">
    <span class="md-ellipsis">
      accely
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.accelz" class="md-nav__link">
    <span class="md-ellipsis">
      accelz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.battery_current" class="md-nav__link">
    <span class="md-ellipsis">
      battery_current
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.battery_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      battery_voltage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.case_temperature" class="md-nav__link">
    <span class="md-ellipsis">
      case_temperature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.genvars" class="md-nav__link">
    <span class="md-ellipsis">
      genvars
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.gyrox" class="md-nav__link">
    <span class="md-ellipsis">
      gyrox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.gyroy" class="md-nav__link">
    <span class="md-ellipsis">
      gyroy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.gyroz" class="md-nav__link">
    <span class="md-ellipsis">
      gyroz
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.joint_encoder_counts" class="md-nav__link">
    <span class="md-ellipsis">
      joint_encoder_counts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.joint_position" class="md-nav__link">
    <span class="md-ellipsis">
      joint_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.joint_torque" class="md-nav__link">
    <span class="md-ellipsis">
      joint_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.joint_velocity" class="md-nav__link">
    <span class="md-ellipsis">
      joint_velocity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_acceleration" class="md-nav__link">
    <span class="md-ellipsis">
      motor_acceleration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_encoder_counts" class="md-nav__link">
    <span class="md-ellipsis">
      motor_encoder_counts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_position" class="md-nav__link">
    <span class="md-ellipsis">
      motor_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_torque" class="md-nav__link">
    <span class="md-ellipsis">
      motor_torque
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_velocity" class="md-nav__link">
    <span class="md-ellipsis">
      motor_velocity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.motor_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      motor_voltage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.winding_temperature" class="md-nav__link">
    <span class="md-ellipsis">
      winding_temperature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.set_motor_current" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_current
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.set_motor_position" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.DephyLegacyActuator.set_motor_voltage" class="md-nav__link">
    <span class="md-ellipsis">
      set_motor_voltage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ThermalModel" class="md-nav__link">
    <span class="md-ellipsis">
      ThermalModel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ThermalModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ThermalModel.update" class="md-nav__link">
    <span class="md-ellipsis">
      update
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensourceleg.actuators.ThermalModel.update_and_get_scale" class="md-nav__link">
    <span class="md-ellipsis">
      update_and_get_scale
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensourceleg.actuators.deprecated_with_routing" class="md-nav__link">
    <span class="md-ellipsis">
      deprecated_with_routing
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Modules</h1>

<div class="doc doc-object doc-module">



<a id="opensourceleg.actuators"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="opensourceleg.actuators.ActuatorBase" class="doc doc-heading">
            <code>ActuatorBase</code>


<a href="#opensourceleg.actuators.ActuatorBase" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


              <details class="quote">
                <summary>Source code in <code>opensourceleg/actuators/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ActuatorBase</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">gear_ratio</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">motor_constants</span><span class="p">:</span> <span class="n">MOTOR_CONSTANTS</span><span class="p">,</span>
        <span class="n">frequency</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="n">offline</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_MOTOR_CONSTANTS</span><span class="p">:</span> <span class="n">MOTOR_CONSTANTS</span> <span class="o">=</span> <span class="n">motor_constants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gear_ratio</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">gear_ratio</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">frequency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_offline</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">offline</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_homed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="p">:</span> <span class="n">CONTROL_MODES</span> <span class="o">=</span> <span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">IDLE</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_motor_zero_position</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motor_position_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_joint_zero_position</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_joint_position_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_joint_direction</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_open</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_streaming</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_original_methods</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MethodWithRequiredModes</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_original_methods</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_mutated_methods</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ActuatorBase&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">exc_traceback</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_restricted_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">method_name</span><span class="si">}</span><span class="s2">() is not available in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> mode.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_set_original_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">method_name</span> <span class="ow">in</span> <span class="n">CONTROL_MODE_METHODS</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">method</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="s2">&quot;_required_modes&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_original_methods</span><span class="p">[</span><span class="n">method_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">method_name</span><span class="si">}</span><span class="s2">() is not implemented in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_mutated_methods</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">method</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_original_methods</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="ow">in</span> <span class="n">method</span><span class="o">.</span><span class="n">_required_modes</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_restricted_method</span><span class="p">,</span> <span class="n">method_name</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">_CONTROL_MODE_CONFIGS</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CONTROL_MODE_CONFIGS</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_get_control_mode_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">CONTROL_MODES</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ControlModeConfig</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">cast</span><span class="p">(</span>
            <span class="n">Optional</span><span class="p">[</span><span class="n">ControlModeConfig</span><span class="p">],</span>
            <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_CONTROL_MODE_CONFIGS</span><span class="p">,</span> <span class="n">mode</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_control_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="n">CONTROL_MODES</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="n">mode</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">] Already in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> control mode.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">current_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_control_mode_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">current_config</span><span class="p">:</span>
            <span class="n">current_config</span><span class="o">.</span><span class="n">exit_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">mode</span>

        <span class="n">new_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_control_mode_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">new_config</span><span class="p">:</span>
            <span class="n">new_config</span><span class="o">.</span><span class="n">entry_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_mutated_methods</span><span class="p">()</span>

    <span class="nd">@abstractmethod</span>
    <span class="nd">@requires</span><span class="p">(</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">VOLTAGE</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_motor_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="nd">@requires</span><span class="p">(</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">CURRENT</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_motor_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="nd">@requires</span><span class="p">(</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">POSITION</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_motor_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@requires</span><span class="p">(</span>
        <span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">POSITION</span>
    <span class="p">)</span>  <span class="c1"># This needs to be tested as set_motor_position is already decorated with requires</span>
    <span class="k">def</span> <span class="nf">set_output_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_position</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="nd">@requires</span><span class="p">(</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">TORQUE</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_motor_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="nd">@requires</span><span class="p">(</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">TORQUE</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_joint_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="nd">@requires</span><span class="p">(</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">CURRENT</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_current_gains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="nd">@requires</span><span class="p">(</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">POSITION</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_position_gains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="nd">@requires</span><span class="p">(</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">IMPEDANCE</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_impedance_gains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">set_motor_zero_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets motor zero position in radians&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motor_zero_position</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">set_motor_position_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets joint offset position in radians&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motor_position_offset</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">set_joint_zero_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets joint zero position in radians&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_joint_zero_position</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">set_joint_position_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets joint offset position in radians&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_joint_position_offset</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">set_joint_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets joint direction to 1 or -1&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_joint_direction</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">motor_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Position of the output in radians.</span>
<span class="sd">        This is calculated by scaling the motor angle with the gear ratio.</span>
<span class="sd">        Note that this method does not consider compliance from an SEA.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_position</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">motor_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">output_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Velocity of the output in radians.</span>
<span class="sd">        This is calculated by scaling the motor angle with the gear ratio.</span>
<span class="sd">        Note that this method does not consider compliance from an SEA.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_velocity</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">motor_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">motor_current</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">motor_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">MOTOR_CONSTANTS</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MOTOR_CONSTANTS</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MOTOR_CONSTANTS</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CONTROL_MODES</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tag</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tag</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_homed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_homed</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_offline</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_offline</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gear_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gear_ratio</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_case_temperature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">MAX_CASE_TEMPERATURE</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">case_temperature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">winding_temperature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">max_winding_temperature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">MAX_WINDING_TEMPERATURE</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_zero_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motor_zero_position</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_position_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motor_position_offset</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_zero_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_joint_zero_position</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_position_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_joint_position_offset</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_joint_direction</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_open</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_open</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_streaming</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_streaming</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.ActuatorBase.output_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">output_position</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.ActuatorBase.output_position" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Position of the output in radians.
This is calculated by scaling the motor angle with the gear ratio.
Note that this method does not consider compliance from an SEA.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.ActuatorBase.output_velocity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">output_velocity</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.ActuatorBase.output_velocity" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Velocity of the output in radians.
This is calculated by scaling the motor angle with the gear ratio.
Note that this method does not consider compliance from an SEA.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.ActuatorBase.set_joint_direction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_joint_direction</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.ActuatorBase.set_joint_direction" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets joint direction to 1 or -1</p>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_joint_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets joint direction to 1 or -1&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_joint_direction</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.ActuatorBase.set_joint_position_offset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_joint_position_offset</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.ActuatorBase.set_joint_position_offset" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets joint offset position in radians</p>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_joint_position_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets joint offset position in radians&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_joint_position_offset</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.ActuatorBase.set_joint_zero_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_joint_zero_position</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.ActuatorBase.set_joint_zero_position" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets joint zero position in radians</p>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_joint_zero_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets joint zero position in radians&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_joint_zero_position</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.ActuatorBase.set_motor_position_offset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_motor_position_offset</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.ActuatorBase.set_motor_position_offset" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets joint offset position in radians</p>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_motor_position_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets joint offset position in radians&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motor_position_offset</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.ActuatorBase.set_motor_zero_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_motor_zero_position</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.ActuatorBase.set_motor_zero_position" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets motor zero position in radians</p>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_motor_zero_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets motor zero position in radians&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motor_zero_position</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="opensourceleg.actuators.ActuatorConnectionException" class="doc doc-heading">
            <code>ActuatorConnectionException</code>


<a href="#opensourceleg.actuators.ActuatorConnectionException" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>Exception</code></p>


        <p>Actuator Connection Exception</p>
<h4 id="opensourceleg.actuators.ActuatorConnectionException--attributes">Attributes<a class="headerlink" href="#opensourceleg.actuators.ActuatorConnectionException--attributes" title="Permanent link">&para;</a></h4>
<p>message (str): Error message</p>

              <details class="quote">
                <summary>Source code in <code>opensourceleg/logging/exceptions.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ActuatorConnectionException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Actuator Connection Exception</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    message (str): Error message</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2"> is not connected&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="opensourceleg.actuators.ActuatorStreamException" class="doc doc-heading">
            <code>ActuatorStreamException</code>


<a href="#opensourceleg.actuators.ActuatorStreamException" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>Exception</code></p>


        <p>Actuator Stream Exception</p>
<h4 id="opensourceleg.actuators.ActuatorStreamException--attributes">Attributes<a class="headerlink" href="#opensourceleg.actuators.ActuatorStreamException--attributes" title="Permanent link">&para;</a></h4>
<p>message (str): Error message</p>

              <details class="quote">
                <summary>Source code in <code>opensourceleg/logging/exceptions.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ActuatorStreamException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Actuator Stream Exception</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    message (str): Error message</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2"> is not streaming, please call start() method before sending commands&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="opensourceleg.actuators.DephyActuator" class="doc doc-heading">
            <code>DephyActuator</code>


<a href="#opensourceleg.actuators.DephyActuator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="flexsea.device.Device">Device</span></code>, <code><a class="autorefs autorefs-internal" title="opensourceleg.actuators.base.ActuatorBase" href="#opensourceleg.actuators.ActuatorBase">ActuatorBase</a></code></p>


              <details class="quote">
                <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DephyActuator</span><span class="p">(</span><span class="n">Device</span><span class="p">,</span> <span class="n">ActuatorBase</span><span class="p">):</span>  <span class="c1"># type: ignore[no-any-unimported]</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;DephyActuator&quot;</span><span class="p">,</span>
        <span class="n">firmware_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;7.2.0&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyACM0&quot;</span><span class="p">,</span>
        <span class="n">gear_ratio</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">baud_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">230400</span><span class="p">,</span>
        <span class="n">frequency</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
        <span class="n">debug_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
        <span class="n">dephy_log</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">offline</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">stop_motor_on_disconnect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ActuatorBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
            <span class="n">gear_ratio</span><span class="o">=</span><span class="n">gear_ratio</span><span class="p">,</span>
            <span class="n">motor_constants</span><span class="o">=</span><span class="n">DEPHY_ACTUATOR_CONSTANTS</span><span class="p">,</span>
            <span class="n">frequency</span><span class="o">=</span><span class="n">frequency</span><span class="p">,</span>
            <span class="n">offline</span><span class="o">=</span><span class="n">offline</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">debug_level</span> <span class="k">if</span> <span class="n">dephy_log</span> <span class="k">else</span> <span class="mi">6</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dephy_log</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">dephy_log</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_offline</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">port</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_streaming</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_open</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Device</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">firmwareVersion</span><span class="o">=</span><span class="n">firmware_version</span><span class="p">,</span>
                <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span>
                <span class="n">baudRate</span><span class="o">=</span><span class="n">baud_rate</span><span class="p">,</span>
                <span class="n">stopMotorOnDisconnect</span><span class="o">=</span><span class="n">stop_motor_on_disconnect</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_model</span><span class="p">:</span> <span class="n">ThermalModel</span> <span class="o">=</span> <span class="n">ThermalModel</span><span class="p">(</span>
            <span class="n">temp_limit_windings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_winding_temperature</span><span class="p">,</span>
            <span class="n">soft_border_C_windings</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">temp_limit_case</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_case_temperature</span><span class="p">,</span>
            <span class="n">soft_border_C_case</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">IDLE</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">[DephyLegacyActuator]&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_CONTROL_MODE_CONFIGS</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CONTROL_MODE_CONFIGS</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DEPHY_CONTROL_MODE_CONFIGS</span>

    <span class="nd">@check_actuator_connection</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_open</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Need admin previleges to open the port &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&#39;. </span><span class="se">\n\n</span><span class="s2"> </span><span class="se">\</span>
<span class="s2">                    Please run the script with &#39;sudo&#39; command or add the user to the dialout group.</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">_exit</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start_streaming</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_streaming</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_control_mode</span><span class="p">(</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">VOLTAGE</span><span class="p">)</span>

    <span class="nd">@check_actuator_stream</span>
    <span class="nd">@check_actuator_open</span>
    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_motor</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_control_mode</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_streaming</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_open</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_model</span><span class="o">.</span><span class="n">T_c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case_temperature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_model</span><span class="o">.</span><span class="n">update_and_get_scale</span><span class="p">(</span>
            <span class="n">dt</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">,</span>
            <span class="n">motor_current</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">motor_current</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case_temperature</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_case_temperature</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span><span class="si">}</span><span class="s2">] Case thermal limit </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_case_temperature</span><span class="si">}</span><span class="s2"> reached. </span><span class="se">\</span>
<span class="s2">                    Stopping motor.&quot;</span>
            <span class="p">)</span>
            <span class="c1"># self.stop()</span>
            <span class="k">raise</span> <span class="n">ThermalLimitException</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">winding_temperature</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_winding_temperature</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span><span class="si">}</span><span class="s2">] Winding thermal limit </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_winding_temperature</span><span class="si">}</span><span class="s2"> reached. </span><span class="se">\</span>
<span class="s2">                    Stopping motor.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ThermalLimitException</span><span class="p">()</span>
        <span class="c1"># Check for thermal fault, bit 2 of the execute status byte</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;status_ex&quot;</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mb">0b00000010</span> <span class="o">==</span> <span class="mb">0b00000010</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Actpack Thermal Limit Tripped&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">home</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">homing_voltage</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">,</span>
        <span class="n">homing_frequency</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">homing_direction</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">joint_direction</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">joint_position_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="n">motor_position_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="n">current_threshold</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5000</span><span class="p">,</span>
        <span class="n">velocity_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        This method homes the actuator and the corresponding joint by moving it to the zero position.</span>
<span class="sd">        The zero position is defined as the position where the joint is fully extended. This method will</span>
<span class="sd">        also load the encoder map if it exists. The encoder map is a polynomial that maps the encoder counts</span>
<span class="sd">        to joint position in radians. This is useful for more accurate joint position estimation.</span>
<span class="sd">        Args:</span>
<span class="sd">            homing_voltage (int): Voltage in mV to use for homing. Default is 2000 mV.</span>
<span class="sd">            homing_frequency (int): Frequency in Hz to use for homing. Default is the actuator&#39;s frequency.</span>
<span class="sd">            homing_direction (int): Direction to move the actuator during homing. Default is -1.</span>
<span class="sd">            joint_direction (int): Direction to move the joint during homing. Default is -1.</span>
<span class="sd">            joint_position_offset (float): Offset in radians to add to the joint position. Default is 0.0.</span>
<span class="sd">            motor_position_offset (float): Offset in radians to add to the motor position. Default is 0.0.</span>
<span class="sd">            current_threshold (int): Current threshold in mA to stop homing the joint or actuator.</span>
<span class="sd">                This is used to detect if the actuator or joint has hit a hard stop. Default is 5000 mA.</span>
<span class="sd">            velocity_threshold (float): Velocity threshold in rad/s to stop homing the joint or actuator.</span>
<span class="sd">                This is also used to detect if the actuator or joint has hit a hard stop. Default is 0.001 rad/s.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_homing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">homing_frequency</span> <span class="o">=</span> <span class="n">homing_frequency</span> <span class="k">if</span> <span class="n">homing_frequency</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_control_mode</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">VOLTAGE</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">homing_direction</span> <span class="o">*</span> <span class="n">homing_voltage</span><span class="p">)</span>  <span class="c1"># mV, negative for counterclockwise</span>

        <span class="n">_motor_encoder_array</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">_joint_encoder_array</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">is_homing</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">homing_frequency</span><span class="p">)</span>

                <span class="n">_motor_encoder_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">motor_position</span><span class="p">)</span>
                <span class="n">_joint_encoder_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joint_position</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_velocity</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">velocity_threshold</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">motor_current</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">current_threshold</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">is_homing</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Homing interrupted.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Homing failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_zero_position</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">motor_position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_joint_zero_position</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">joint_position</span><span class="p">)</span>

        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_joint_direction</span><span class="p">(</span><span class="n">joint_direction</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_position_offset</span><span class="p">(</span><span class="n">motor_position_offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_joint_position_offset</span><span class="p">(</span><span class="n">joint_position_offset</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_homed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Homing complete.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;./</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">_encoder_map.npy&quot;</span><span class="p">):</span>
            <span class="n">coefficients</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;./</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">_encoder_map.npy&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_encoder_map</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span><span class="p">(</span><span class="n">coef</span><span class="o">=</span><span class="n">coefficients</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] No encoder map found. Please call the make_encoder_map method </span><span class="se">\</span>
<span class="s2">                    to create one. The encoder map is used to estimate joint position more accurately.&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">make_encoder_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method makes a lookup table to calculate the position measured by the joint encoder.</span>
<span class="sd">        This is necessary because the magnetic output encoders are nonlinear.</span>
<span class="sd">        By making the map while the joint is unloaded, joint position calculated by motor position * gear ratio</span>
<span class="sd">        should be the same as the true joint position.</span>

<span class="sd">        Output from this function is a file containing a_i values parameterizing the map</span>

<span class="sd">        Eqn: position = sum from i=0^5 (a_i*counts^i)</span>

<span class="sd">        Author: Kevin Best</span>
<span class="sd">                U-M Locolab | Neurobionics Lab</span>
<span class="sd">                Gitub: tkevinbest, https://github.com/tkevinbest</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_homed</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Please home the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2"> joint before making the encoder map.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;./</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">_encoder_map.npy&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">overwrite</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Encoder map exists. Skipping encoder map creation.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_control_mode</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">CURRENT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_current_gains</span><span class="p">()</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_current_gains</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_joint_torque</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_joint_torque</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

        <span class="n">_joint_encoder_array</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">_output_position_array</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Please manually move the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2"> joint numerous times through </span><span class="se">\</span>
<span class="s2">                its full range of motion for 10 seconds. </span><span class="se">\n</span><span class="si">{</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Press any key when you are ready to start.&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="n">_start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">_start_time</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
                <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                    <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Mapping the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2"> </span><span class="se">\</span>
<span class="s2">                        joint encoder: </span><span class="si">{</span><span class="mi">10</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_start_time</span><span class="si">}</span><span class="s2"> seconds left.&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="n">_joint_encoder_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joint_encoder_counts</span><span class="p">)</span>
                <span class="n">_output_position_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_position</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Encoder map interrupted.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] You may now stop moving the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2"> joint.&quot;</span><span class="p">)</span>

        <span class="n">_power</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">4.0</span><span class="p">)</span>
        <span class="n">_a_mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">_joint_encoder_array</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">**</span> <span class="n">_power</span>
        <span class="n">_beta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">lstsq</span><span class="p">(</span><span class="n">_a_mat</span><span class="p">,</span> <span class="n">_output_position_array</span><span class="p">,</span> <span class="n">rcond</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">_coeffs</span> <span class="o">=</span> <span class="n">_beta</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_encoder_map</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span><span class="p">(</span><span class="n">coef</span><span class="o">=</span><span class="n">_coeffs</span><span class="p">))</span>

        <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;./</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">_encoder_map.npy&quot;</span><span class="p">,</span> <span class="n">arr</span><span class="o">=</span><span class="n">_coeffs</span><span class="p">)</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Encoder map saved to &#39;./</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">_encoder_map.npy&#39;.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_motor_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the motor torque in Nm. This is the torque that is applied to the motor rotor, not the joint or output.</span>
<span class="sd">        Args:</span>
<span class="sd">            value (float): The torque to set in Nm.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_current</span><span class="p">(</span>
            <span class="n">value</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">NM_PER_MILLIAMP</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_joint_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the joint torque of the joint.</span>
<span class="sd">        This is the torque that is applied to the joint, not the motor.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (float): torque in N_m</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_torque</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span><span class="p">)</span>

    <span class="nd">@deprecated_with_routing</span><span class="p">(</span><span class="n">alternative_func</span><span class="o">=</span><span class="n">set_joint_torque</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_output_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the output torque of the joint.</span>
<span class="sd">        This is the torque that is applied to the joint, not the motor.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (float): torque in N_m</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_torque</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_motor_current</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the motor current in mA.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (float): The current to set in mA.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_motor_current</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="nd">@deprecated_with_routing</span><span class="p">(</span><span class="n">alternative_func</span><span class="o">=</span><span class="n">set_motor_current</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_motor_current</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_motor_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the motor voltage in mV.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (float): The voltage to set in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="nd">@deprecated_with_routing</span><span class="p">(</span><span class="n">alternative_func</span><span class="o">=</span><span class="n">set_motor_voltage</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_motor_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the motor position in radians.</span>
<span class="sd">        If in impedance mode, this sets the equilibrium angle in radians.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (float): The position to set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">command_motor_position</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span>
                <span class="p">(</span><span class="n">value</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_zero_position</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_position_offset</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">RAD_PER_COUNT</span>
            <span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_position_gains</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span>
        <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span>
        <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span>
        <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the position gains in arbitrary Dephy units.</span>

<span class="sd">        Args:</span>
<span class="sd">            kp (float): The proportional gain</span>
<span class="sd">            ki (float): The integral gain</span>
<span class="sd">            kd (float): The derivative gain</span>
<span class="sd">            ff (float): The feedforward gain</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_gains</span><span class="p">(</span>
            <span class="n">kp</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kp</span><span class="p">),</span>
            <span class="n">ki</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ki</span><span class="p">),</span>
            <span class="n">kd</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kd</span><span class="p">),</span>
            <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">ff</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ff</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_current_gains</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span>
        <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span>
        <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span>
        <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the current gains in arbitrary Dephy units.</span>

<span class="sd">        Args:</span>
<span class="sd">            kp (float): The proportional gain</span>
<span class="sd">            ki (float): The integral gain</span>
<span class="sd">            kd (float): The derivative gain</span>
<span class="sd">            ff (float): The feedforward gain</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_gains</span><span class="p">(</span>
            <span class="n">kp</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kp</span><span class="p">),</span>
            <span class="n">ki</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ki</span><span class="p">),</span>
            <span class="n">kd</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kd</span><span class="p">),</span>
            <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">ff</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ff</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_output_impedance</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span>
        <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span>
        <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span>
        <span class="n">k</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">,</span>
        <span class="n">b</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
        <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the impedance gains of the joint in real units: Nm/rad and Nm/rad/s.</span>
<span class="sd">        This sets the impedance at the output and automatically scales based on gear raitos.</span>

<span class="sd">        Conversion:</span>
<span class="sd">            K_motor = K_joint / (gear_ratio ** 2)</span>
<span class="sd">            B_motor = B_joint / (gear_ratio ** 2)</span>

<span class="sd">        Args:</span>
<span class="sd">            kp (float): Proportional gain. Defaults to 40.</span>
<span class="sd">            ki (float): Integral gain. Defaults to 400.</span>
<span class="sd">            kd (float): Derivative gain. Defaults to 0.</span>
<span class="sd">            k (float): Spring constant. Defaults to 100 Nm/rad.</span>
<span class="sd">            b (float): Damping constant. Defaults to 3.0 Nm/rad/s.</span>
<span class="sd">            ff (float): Feedforward gain. Defaults to 128.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_impedance</span><span class="p">(</span>
            <span class="n">kp</span><span class="o">=</span><span class="n">kp</span><span class="p">,</span>
            <span class="n">ki</span><span class="o">=</span><span class="n">ki</span><span class="p">,</span>
            <span class="n">kd</span><span class="o">=</span><span class="n">kd</span><span class="p">,</span>
            <span class="n">k</span><span class="o">=</span><span class="n">k</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">b</span><span class="o">=</span><span class="n">b</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span>
            <span class="n">ff</span><span class="o">=</span><span class="n">ff</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_impedance_gains</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span>
        <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span>
        <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span>
        <span class="n">k</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">k</span><span class="p">,</span>
        <span class="n">b</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">b</span><span class="p">,</span>
        <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the impedance gains in arbitrary actpack units.</span>
<span class="sd">        See Dephy&#39;s webpage for conversions or use other library methods that handle conversion for you.</span>

<span class="sd">        Args:</span>
<span class="sd">            kp (float): The proportional gain</span>
<span class="sd">            ki (float): The integral gain</span>
<span class="sd">            kd (float): The derivative gain</span>
<span class="sd">            k (float): The spring constant</span>
<span class="sd">            b (float): The damping constant</span>
<span class="sd">            ff (float): The feedforward gain</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_gains</span><span class="p">(</span>
            <span class="n">kp</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kp</span><span class="p">),</span>
            <span class="n">ki</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ki</span><span class="p">),</span>
            <span class="n">kd</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kd</span><span class="p">),</span>
            <span class="n">k</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">),</span>
            <span class="n">b</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">),</span>
            <span class="n">ff</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ff</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_motor_impedance</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span>
        <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span>
        <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span>
        <span class="n">k</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.08922</span><span class="p">,</span>
        <span class="n">b</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0038070</span><span class="p">,</span>
        <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the impedance gains of the motor in real units: Nm/rad and Nm/rad/s.</span>

<span class="sd">        Args:</span>
<span class="sd">            kp (float): Proportional gain. Defaults to 40.</span>
<span class="sd">            ki (float): Integral gain. Defaults to 400.</span>
<span class="sd">            kd (float): Derivative gain. Defaults to 0.</span>
<span class="sd">            k (float): Spring constant. Defaults to 0.08922 Nm/rad.</span>
<span class="sd">            b (float): Damping constant. Defaults to 0.0038070 Nm/rad/s.</span>
<span class="sd">            ff (float): Feedforward gain. Defaults to 128.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_impedance_gains</span><span class="p">(</span>
            <span class="n">kp</span><span class="o">=</span><span class="n">kp</span><span class="p">,</span>
            <span class="n">ki</span><span class="o">=</span><span class="n">ki</span><span class="p">,</span>
            <span class="n">kd</span><span class="o">=</span><span class="n">kd</span><span class="p">,</span>
            <span class="n">k</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">NM_PER_RAD_TO_K</span><span class="p">),</span>
            <span class="n">b</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">b</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">NM_S_PER_RAD_TO_B</span><span class="p">),</span>
            <span class="n">ff</span><span class="o">=</span><span class="n">ff</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_encoder_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoder_map</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the joint encoder map&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span> <span class="o">=</span> <span class="n">encoder_map</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">encoder_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Polynomial coefficients defining the joint encoder map from counts to radians.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_encoder_map&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Encoder map is not set. Please call the make_encoder_map method to create one.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Q-axis motor voltage in mV.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;mot_volt&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_current</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;mot_cur&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;mot_cur&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">NM_PER_MILLIAMP</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;mot_ang&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">RAD_PER_COUNT</span><span class="p">)</span>
                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_zero_position</span>
                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_position_offset</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_encoder_counts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Raw reading from motor encoder in counts.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;mot_ang&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_encoder_counts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Raw reading from joint encoder in counts.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;ank_ang&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;mot_vel&quot;</span><span class="p">])</span> <span class="o">*</span> <span class="n">RAD_PER_DEG</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_acceleration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;mot_acc&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">battery_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Battery voltage in mV.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;batt_volt&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">battery_current</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Battery current in mA.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;batt_curr&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;ank_ang&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">RAD_PER_COUNT</span><span class="p">)</span>
                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">joint_zero_position</span>
                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">joint_position_offset</span>
            <span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">joint_direction</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;ank_vel&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">RAD_PER_DEG</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">joint_direction</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Torque at the joint output in Nm.</span>
<span class="sd">        This is calculated using motor current, k_t, and the gear ratio.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_torque</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">case_temperature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;temperature&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">winding_temperature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ESTIMATED temperature of the windings in celsius.</span>
<span class="sd">        This is calculated based on the thermal model using motor current.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thermal_model</span><span class="o">.</span><span class="n">T_w</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">genvars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dephy&#39;s &#39;genvars&#39; object.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="nb">object</span><span class="o">=</span><span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;genvar_0&quot;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;genvar_1&quot;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;genvar_2&quot;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;genvar_3&quot;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;genvar_4&quot;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;genvar_5&quot;</span><span class="p">],</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning zeros&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">accelx</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Acceleration in x direction in m/s^2.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;accelx&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">M_PER_SEC_SQUARED_ACCLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">accely</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Acceleration in y direction in m/s^2.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;accely&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">M_PER_SEC_SQUARED_ACCLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">accelz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Acceleration in z direction in m/s^2.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;accelz&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">M_PER_SEC_SQUARED_ACCLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gyrox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Angular velocity in x direction in rad/s.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;gyrox&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">RAD_PER_SEC_GYROLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gyroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Angular velocity in y direction in rad/s.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;gyroy&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">RAD_PER_SEC_GYROLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gyroz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Angular velocity in z direction in rad/s.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="s2">&quot;gyroz&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">RAD_PER_SEC_GYROLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">thermal_scaling_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Scale factor to use in torque control, in [0,1].</span>
<span class="sd">        If you scale the torque command by this factor, the motor temperature will never</span>
<span class="sd">        exceed max allowable temperature. For a proof, see paper referenced in thermal model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_scale</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.accelx" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">accelx</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.accelx" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Acceleration in x direction in m/s^2.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.accely" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">accely</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.accely" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Acceleration in y direction in m/s^2.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.accelz" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">accelz</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.accelz" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Acceleration in z direction in m/s^2.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.battery_current" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">battery_current</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.battery_current" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Battery current in mA.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.battery_voltage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">battery_voltage</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.battery_voltage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Battery voltage in mV.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.encoder_map" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">encoder_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.encoder_map" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Polynomial coefficients defining the joint encoder map from counts to radians.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.genvars" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">genvars</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.genvars" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Dephy's 'genvars' object.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.gyrox" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gyrox</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.gyrox" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Angular velocity in x direction in rad/s.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.gyroy" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gyroy</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.gyroy" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Angular velocity in y direction in rad/s.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.gyroz" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gyroz</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.gyroz" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Angular velocity in z direction in rad/s.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.joint_encoder_counts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">joint_encoder_counts</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.joint_encoder_counts" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Raw reading from joint encoder in counts.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.joint_torque" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">joint_torque</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.joint_torque" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Torque at the joint output in Nm.
This is calculated using motor current, k_t, and the gear ratio.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.motor_encoder_counts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">motor_encoder_counts</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.motor_encoder_counts" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Raw reading from motor encoder in counts.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.motor_voltage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">motor_voltage</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.motor_voltage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Q-axis motor voltage in mV.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.thermal_scaling_factor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">thermal_scaling_factor</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.thermal_scaling_factor" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Scale factor to use in torque control, in [0,1].
If you scale the torque command by this factor, the motor temperature will never
exceed max allowable temperature. For a proof, see paper referenced in thermal model.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyActuator.winding_temperature" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">winding_temperature</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyActuator.winding_temperature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>ESTIMATED temperature of the windings in celsius.
This is calculated based on the thermal model using motor current.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.home" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">home</span><span class="p">(</span><span class="n">homing_voltage</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">homing_frequency</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">homing_direction</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">joint_direction</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">joint_position_offset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">motor_position_offset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">current_threshold</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">velocity_threshold</span><span class="o">=</span><span class="mf">0.001</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.home" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>This method homes the actuator and the corresponding joint by moving it to the zero position.
The zero position is defined as the position where the joint is fully extended. This method will
also load the encoder map if it exists. The encoder map is a polynomial that maps the encoder counts
to joint position in radians. This is useful for more accurate joint position estimation.
Args:
    homing_voltage (int): Voltage in mV to use for homing. Default is 2000 mV.
    homing_frequency (int): Frequency in Hz to use for homing. Default is the actuator's frequency.
    homing_direction (int): Direction to move the actuator during homing. Default is -1.
    joint_direction (int): Direction to move the joint during homing. Default is -1.
    joint_position_offset (float): Offset in radians to add to the joint position. Default is 0.0.
    motor_position_offset (float): Offset in radians to add to the motor position. Default is 0.0.
    current_threshold (int): Current threshold in mA to stop homing the joint or actuator.
        This is used to detect if the actuator or joint has hit a hard stop. Default is 5000 mA.
    velocity_threshold (float): Velocity threshold in rad/s to stop homing the joint or actuator.
        This is also used to detect if the actuator or joint has hit a hard stop. Default is 0.001 rad/s.</p>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">home</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">homing_voltage</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">,</span>
    <span class="n">homing_frequency</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">homing_direction</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">joint_direction</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">joint_position_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">motor_position_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">current_threshold</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5000</span><span class="p">,</span>
    <span class="n">velocity_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    This method homes the actuator and the corresponding joint by moving it to the zero position.</span>
<span class="sd">    The zero position is defined as the position where the joint is fully extended. This method will</span>
<span class="sd">    also load the encoder map if it exists. The encoder map is a polynomial that maps the encoder counts</span>
<span class="sd">    to joint position in radians. This is useful for more accurate joint position estimation.</span>
<span class="sd">    Args:</span>
<span class="sd">        homing_voltage (int): Voltage in mV to use for homing. Default is 2000 mV.</span>
<span class="sd">        homing_frequency (int): Frequency in Hz to use for homing. Default is the actuator&#39;s frequency.</span>
<span class="sd">        homing_direction (int): Direction to move the actuator during homing. Default is -1.</span>
<span class="sd">        joint_direction (int): Direction to move the joint during homing. Default is -1.</span>
<span class="sd">        joint_position_offset (float): Offset in radians to add to the joint position. Default is 0.0.</span>
<span class="sd">        motor_position_offset (float): Offset in radians to add to the motor position. Default is 0.0.</span>
<span class="sd">        current_threshold (int): Current threshold in mA to stop homing the joint or actuator.</span>
<span class="sd">            This is used to detect if the actuator or joint has hit a hard stop. Default is 5000 mA.</span>
<span class="sd">        velocity_threshold (float): Velocity threshold in rad/s to stop homing the joint or actuator.</span>
<span class="sd">            This is also used to detect if the actuator or joint has hit a hard stop. Default is 0.001 rad/s.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">is_homing</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">homing_frequency</span> <span class="o">=</span> <span class="n">homing_frequency</span> <span class="k">if</span> <span class="n">homing_frequency</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_control_mode</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">VOLTAGE</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">homing_direction</span> <span class="o">*</span> <span class="n">homing_voltage</span><span class="p">)</span>  <span class="c1"># mV, negative for counterclockwise</span>

    <span class="n">_motor_encoder_array</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_joint_encoder_array</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">while</span> <span class="n">is_homing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">homing_frequency</span><span class="p">)</span>

            <span class="n">_motor_encoder_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">motor_position</span><span class="p">)</span>
            <span class="n">_joint_encoder_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joint_position</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_velocity</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">velocity_threshold</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">motor_current</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">current_threshold</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">is_homing</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Homing interrupted.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Homing failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_zero_position</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">motor_position</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_joint_zero_position</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">joint_position</span><span class="p">)</span>

    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_joint_direction</span><span class="p">(</span><span class="n">joint_direction</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_position_offset</span><span class="p">(</span><span class="n">motor_position_offset</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_joint_position_offset</span><span class="p">(</span><span class="n">joint_position_offset</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_is_homed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Homing complete.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;./</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">_encoder_map.npy&quot;</span><span class="p">):</span>
        <span class="n">coefficients</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;./</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">_encoder_map.npy&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_encoder_map</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span><span class="p">(</span><span class="n">coef</span><span class="o">=</span><span class="n">coefficients</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] No encoder map found. Please call the make_encoder_map method </span><span class="se">\</span>
<span class="s2">                to create one. The encoder map is used to estimate joint position more accurately.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.make_encoder_map" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">make_encoder_map</span><span class="p">(</span><span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.make_encoder_map" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>This method makes a lookup table to calculate the position measured by the joint encoder.
This is necessary because the magnetic output encoders are nonlinear.
By making the map while the joint is unloaded, joint position calculated by motor position * gear ratio
should be the same as the true joint position.</p>
<p>Output from this function is a file containing a_i values parameterizing the map</p>
<p>Eqn: position = sum from i=0^5 (a_i*counts^i)</p>


<details class="author" open>
  <summary>Kevin Best</summary>
  <p>U-M Locolab | Neurobionics Lab
Gitub: tkevinbest, https://github.com/tkevinbest</p>
</details>
            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">make_encoder_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method makes a lookup table to calculate the position measured by the joint encoder.</span>
<span class="sd">    This is necessary because the magnetic output encoders are nonlinear.</span>
<span class="sd">    By making the map while the joint is unloaded, joint position calculated by motor position * gear ratio</span>
<span class="sd">    should be the same as the true joint position.</span>

<span class="sd">    Output from this function is a file containing a_i values parameterizing the map</span>

<span class="sd">    Eqn: position = sum from i=0^5 (a_i*counts^i)</span>

<span class="sd">    Author: Kevin Best</span>
<span class="sd">            U-M Locolab | Neurobionics Lab</span>
<span class="sd">            Gitub: tkevinbest, https://github.com/tkevinbest</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_homed</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Please home the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2"> joint before making the encoder map.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;./</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">_encoder_map.npy&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">overwrite</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Encoder map exists. Skipping encoder map creation.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_control_mode</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">CURRENT</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_current_gains</span><span class="p">()</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_current_gains</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_joint_torque</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_joint_torque</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

    <span class="n">_joint_encoder_array</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_output_position_array</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Please manually move the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2"> joint numerous times through </span><span class="se">\</span>
<span class="s2">            its full range of motion for 10 seconds. </span><span class="se">\n</span><span class="si">{</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Press any key when you are ready to start.&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="n">_start_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">while</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">_start_time</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Mapping the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2"> </span><span class="se">\</span>
<span class="s2">                    joint encoder: </span><span class="si">{</span><span class="mi">10</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_start_time</span><span class="si">}</span><span class="s2"> seconds left.&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">_joint_encoder_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joint_encoder_counts</span><span class="p">)</span>
            <span class="n">_output_position_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_position</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="n">LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Encoder map interrupted.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] You may now stop moving the </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2"> joint.&quot;</span><span class="p">)</span>

    <span class="n">_power</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">4.0</span><span class="p">)</span>
    <span class="n">_a_mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">_joint_encoder_array</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">**</span> <span class="n">_power</span>
    <span class="n">_beta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">lstsq</span><span class="p">(</span><span class="n">_a_mat</span><span class="p">,</span> <span class="n">_output_position_array</span><span class="p">,</span> <span class="n">rcond</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">_coeffs</span> <span class="o">=</span> <span class="n">_beta</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_encoder_map</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span><span class="p">(</span><span class="n">coef</span><span class="o">=</span><span class="n">_coeffs</span><span class="p">))</span>

    <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;./</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">_encoder_map.npy&quot;</span><span class="p">,</span> <span class="n">arr</span><span class="o">=</span><span class="n">_coeffs</span><span class="p">)</span>
    <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Encoder map saved to &#39;./</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">_encoder_map.npy&#39;.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_current_gains" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_current_gains</span><span class="p">(</span><span class="n">kp</span><span class="o">=</span><span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span> <span class="n">ki</span><span class="o">=</span><span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span> <span class="n">kd</span><span class="o">=</span><span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span> <span class="n">ff</span><span class="o">=</span><span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_current_gains" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the current gains in arbitrary Dephy units.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>kp</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The proportional gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_CURRENT_GAINS.kp">kp</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ki</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The integral gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_CURRENT_GAINS.ki">ki</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kd</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The derivative gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_CURRENT_GAINS.kd">kd</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ff</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The feedforward gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_CURRENT_GAINS.ff">ff</span></code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_current_gains</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span>
    <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span>
    <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span>
    <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_CURRENT_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the current gains in arbitrary Dephy units.</span>

<span class="sd">    Args:</span>
<span class="sd">        kp (float): The proportional gain</span>
<span class="sd">        ki (float): The integral gain</span>
<span class="sd">        kd (float): The derivative gain</span>
<span class="sd">        ff (float): The feedforward gain</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_gains</span><span class="p">(</span>
        <span class="n">kp</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kp</span><span class="p">),</span>
        <span class="n">ki</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ki</span><span class="p">),</span>
        <span class="n">kd</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kd</span><span class="p">),</span>
        <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">ff</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ff</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_encoder_map" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_encoder_map</span><span class="p">(</span><span class="n">encoder_map</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_encoder_map" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the joint encoder map</p>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_encoder_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoder_map</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the joint encoder map&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_encoder_map</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">polynomial</span><span class="o">.</span><span class="n">Polynomial</span> <span class="o">=</span> <span class="n">encoder_map</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_impedance_gains" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_impedance_gains</span><span class="p">(</span><span class="n">kp</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span> <span class="n">ki</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span> <span class="n">kd</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">k</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="n">ff</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_impedance_gains" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the impedance gains in arbitrary actpack units.
See Dephy's webpage for conversions or use other library methods that handle conversion for you.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>kp</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The proportional gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.kp">kp</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ki</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The integral gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.ki">ki</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kd</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The derivative gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.kd">kd</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>k</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The spring constant</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.k">k</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>b</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The damping constant</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.b">b</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ff</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The feedforward gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.ff">ff</span></code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_impedance_gains</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span>
    <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span>
    <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span>
    <span class="n">k</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">k</span><span class="p">,</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">b</span><span class="p">,</span>
    <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the impedance gains in arbitrary actpack units.</span>
<span class="sd">    See Dephy&#39;s webpage for conversions or use other library methods that handle conversion for you.</span>

<span class="sd">    Args:</span>
<span class="sd">        kp (float): The proportional gain</span>
<span class="sd">        ki (float): The integral gain</span>
<span class="sd">        kd (float): The derivative gain</span>
<span class="sd">        k (float): The spring constant</span>
<span class="sd">        b (float): The damping constant</span>
<span class="sd">        ff (float): The feedforward gain</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_gains</span><span class="p">(</span>
        <span class="n">kp</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kp</span><span class="p">),</span>
        <span class="n">ki</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ki</span><span class="p">),</span>
        <span class="n">kd</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kd</span><span class="p">),</span>
        <span class="n">k</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">),</span>
        <span class="n">b</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">),</span>
        <span class="n">ff</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ff</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_joint_torque" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_joint_torque</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_joint_torque" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the joint torque of the joint.
This is the torque that is applied to the joint, not the motor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>value</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>torque in N_m</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_joint_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the joint torque of the joint.</span>
<span class="sd">    This is the torque that is applied to the joint, not the motor.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (float): torque in N_m</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_torque</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_motor_current" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_motor_current</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_motor_current" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the motor current in mA.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>value</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current to set in mA.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_motor_current</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the motor current in mA.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (float): The current to set in mA.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">command_motor_current</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_motor_impedance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_motor_impedance</span><span class="p">(</span><span class="n">kp</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span> <span class="n">ki</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span> <span class="n">kd</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">0.08922</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">0.003807</span><span class="p">,</span> <span class="n">ff</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_motor_impedance" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the impedance gains of the motor in real units: Nm/rad and Nm/rad/s.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>kp</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Proportional gain. Defaults to 40.</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.kp">kp</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ki</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Integral gain. Defaults to 400.</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.ki">ki</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kd</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Derivative gain. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.kd">kd</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>k</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spring constant. Defaults to 0.08922 Nm/rad.</p>
              </div>
            </td>
            <td>
                  <code>0.08922</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>b</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Damping constant. Defaults to 0.0038070 Nm/rad/s.</p>
              </div>
            </td>
            <td>
                  <code>0.003807</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ff</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Feedforward gain. Defaults to 128.</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.ff">ff</span></code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_motor_impedance</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span>
    <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span>
    <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span>
    <span class="n">k</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.08922</span><span class="p">,</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0038070</span><span class="p">,</span>
    <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the impedance gains of the motor in real units: Nm/rad and Nm/rad/s.</span>

<span class="sd">    Args:</span>
<span class="sd">        kp (float): Proportional gain. Defaults to 40.</span>
<span class="sd">        ki (float): Integral gain. Defaults to 400.</span>
<span class="sd">        kd (float): Derivative gain. Defaults to 0.</span>
<span class="sd">        k (float): Spring constant. Defaults to 0.08922 Nm/rad.</span>
<span class="sd">        b (float): Damping constant. Defaults to 0.0038070 Nm/rad/s.</span>
<span class="sd">        ff (float): Feedforward gain. Defaults to 128.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_impedance_gains</span><span class="p">(</span>
        <span class="n">kp</span><span class="o">=</span><span class="n">kp</span><span class="p">,</span>
        <span class="n">ki</span><span class="o">=</span><span class="n">ki</span><span class="p">,</span>
        <span class="n">kd</span><span class="o">=</span><span class="n">kd</span><span class="p">,</span>
        <span class="n">k</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">NM_PER_RAD_TO_K</span><span class="p">),</span>
        <span class="n">b</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">b</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">NM_S_PER_RAD_TO_B</span><span class="p">),</span>
        <span class="n">ff</span><span class="o">=</span><span class="n">ff</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_motor_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_motor_position</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_motor_position" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the motor position in radians.
If in impedance mode, this sets the equilibrium angle in radians.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>value</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position to set</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_motor_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the motor position in radians.</span>
<span class="sd">    If in impedance mode, this sets the equilibrium angle in radians.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (float): The position to set</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">command_motor_position</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span>
            <span class="p">(</span><span class="n">value</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_zero_position</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_position_offset</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">RAD_PER_COUNT</span>
        <span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_motor_torque" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_motor_torque</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_motor_torque" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the motor torque in Nm. This is the torque that is applied to the motor rotor, not the joint or output.
Args:
    value (float): The torque to set in Nm.</p>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_motor_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the motor torque in Nm. This is the torque that is applied to the motor rotor, not the joint or output.</span>
<span class="sd">    Args:</span>
<span class="sd">        value (float): The torque to set in Nm.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_current</span><span class="p">(</span>
        <span class="n">value</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">NM_PER_MILLIAMP</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_motor_voltage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_motor_voltage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the motor voltage in mV.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>value</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The voltage to set in mV.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_motor_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the motor voltage in mV.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (float): The voltage to set in mV.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">command_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_output_impedance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_output_impedance</span><span class="p">(</span><span class="n">kp</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span> <span class="n">ki</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span> <span class="n">kd</span><span class="o">=</span><span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">ff</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_output_impedance" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the impedance gains of the joint in real units: Nm/rad and Nm/rad/s.
This sets the impedance at the output and automatically scales based on gear raitos.</p>


<details class="conversion" open>
  <summary>Conversion</summary>
  <p>K_motor = K_joint / (gear_ratio ** 2)
B_motor = B_joint / (gear_ratio ** 2)</p>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>kp</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Proportional gain. Defaults to 40.</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.kp">kp</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ki</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Integral gain. Defaults to 400.</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.ki">ki</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kd</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Derivative gain. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_IMPEDANCE_GAINS.kd">kd</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>k</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spring constant. Defaults to 100 Nm/rad.</p>
              </div>
            </td>
            <td>
                  <code>100.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>b</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Damping constant. Defaults to 3.0 Nm/rad/s.</p>
              </div>
            </td>
            <td>
                  <code>3.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ff</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Feedforward gain. Defaults to 128.</p>
              </div>
            </td>
            <td>
                  <code>128</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_output_impedance</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span>
    <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span>
    <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_IMPEDANCE_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span>
    <span class="n">k</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">,</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">,</span>
    <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">128</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the impedance gains of the joint in real units: Nm/rad and Nm/rad/s.</span>
<span class="sd">    This sets the impedance at the output and automatically scales based on gear raitos.</span>

<span class="sd">    Conversion:</span>
<span class="sd">        K_motor = K_joint / (gear_ratio ** 2)</span>
<span class="sd">        B_motor = B_joint / (gear_ratio ** 2)</span>

<span class="sd">    Args:</span>
<span class="sd">        kp (float): Proportional gain. Defaults to 40.</span>
<span class="sd">        ki (float): Integral gain. Defaults to 400.</span>
<span class="sd">        kd (float): Derivative gain. Defaults to 0.</span>
<span class="sd">        k (float): Spring constant. Defaults to 100 Nm/rad.</span>
<span class="sd">        b (float): Damping constant. Defaults to 3.0 Nm/rad/s.</span>
<span class="sd">        ff (float): Feedforward gain. Defaults to 128.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_impedance</span><span class="p">(</span>
        <span class="n">kp</span><span class="o">=</span><span class="n">kp</span><span class="p">,</span>
        <span class="n">ki</span><span class="o">=</span><span class="n">ki</span><span class="p">,</span>
        <span class="n">kd</span><span class="o">=</span><span class="n">kd</span><span class="p">,</span>
        <span class="n">k</span><span class="o">=</span><span class="n">k</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">b</span><span class="o">=</span><span class="n">b</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">ff</span><span class="o">=</span><span class="n">ff</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_output_torque" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_output_torque</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_output_torque" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Set the output torque of the joint.
This is the torque that is applied to the joint, not the motor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>value</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>torque in N_m</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@deprecated_with_routing</span><span class="p">(</span><span class="n">alternative_func</span><span class="o">=</span><span class="n">set_joint_torque</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">set_output_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the output torque of the joint.</span>
<span class="sd">    This is the torque that is applied to the joint, not the motor.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (float): torque in N_m</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_torque</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyActuator.set_position_gains" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_position_gains</span><span class="p">(</span><span class="n">kp</span><span class="o">=</span><span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span> <span class="n">ki</span><span class="o">=</span><span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span> <span class="n">kd</span><span class="o">=</span><span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span> <span class="n">ff</span><span class="o">=</span><span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyActuator.set_position_gains" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the position gains in arbitrary Dephy units.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>kp</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The proportional gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_POSITION_GAINS.kp">kp</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ki</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The integral gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_POSITION_GAINS.ki">ki</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>kd</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The derivative gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_POSITION_GAINS.kd">kd</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ff</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The feedforward gain</p>
              </div>
            </td>
            <td>
                  <code><span title="opensourceleg.actuators.dephy.DEFAULT_POSITION_GAINS.ff">ff</span></code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_position_gains</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">kp</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">kp</span><span class="p">,</span>
    <span class="n">ki</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">ki</span><span class="p">,</span>
    <span class="n">kd</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">kd</span><span class="p">,</span>
    <span class="n">ff</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">DEFAULT_POSITION_GAINS</span><span class="o">.</span><span class="n">ff</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the position gains in arbitrary Dephy units.</span>

<span class="sd">    Args:</span>
<span class="sd">        kp (float): The proportional gain</span>
<span class="sd">        ki (float): The integral gain</span>
<span class="sd">        kd (float): The derivative gain</span>
<span class="sd">        ff (float): The feedforward gain</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_gains</span><span class="p">(</span>
        <span class="n">kp</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kp</span><span class="p">),</span>
        <span class="n">ki</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ki</span><span class="p">),</span>
        <span class="n">kd</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">kd</span><span class="p">),</span>
        <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">b</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">ff</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ff</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="opensourceleg.actuators.DephyLegacyActuator" class="doc doc-heading">
            <code>DephyLegacyActuator</code>


<a href="#opensourceleg.actuators.DephyLegacyActuator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="opensourceleg.actuators.dephy.DephyActuator" href="#opensourceleg.actuators.DephyActuator">DephyActuator</a></code></p>


              <details class="quote">
                <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DephyLegacyActuator</span><span class="p">(</span><span class="n">DephyActuator</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tag</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;DephyActuator&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;/dev/ttyACM0&quot;</span><span class="p">,</span>
        <span class="n">gear_ratio</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">baud_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">230400</span><span class="p">,</span>
        <span class="n">frequency</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
        <span class="n">debug_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
        <span class="n">dephy_log</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">offline</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ActuatorBase</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
            <span class="n">gear_ratio</span><span class="o">=</span><span class="n">gear_ratio</span><span class="p">,</span>
            <span class="n">motor_constants</span><span class="o">=</span><span class="n">DEPHY_ACTUATOR_CONSTANTS</span><span class="p">,</span>
            <span class="n">frequency</span><span class="o">=</span><span class="n">frequency</span><span class="p">,</span>
            <span class="n">offline</span><span class="o">=</span><span class="n">offline</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">debug_level</span> <span class="k">if</span> <span class="n">dephy_log</span> <span class="k">else</span> <span class="mi">6</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dephy_log</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">dephy_log</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_offline</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">port</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_streaming</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_open</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># def set_is_streaming(self, value):</span>
            <span class="c1">#     self._is_streaming = value</span>

            <span class="c1"># def set_is_open(self, value):</span>
            <span class="c1">#     self._is_open = value</span>

            <span class="c1"># type(self).is_streaming = property(fset=set_is_streaming)</span>
            <span class="c1"># type(self).is_open = property(fset=set_is_open)</span>

            <span class="n">Device</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span> <span class="n">baud_rate</span><span class="o">=</span><span class="n">baud_rate</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_model</span><span class="p">:</span> <span class="n">ThermalModel</span> <span class="o">=</span> <span class="n">ThermalModel</span><span class="p">(</span>
            <span class="n">temp_limit_windings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_winding_temperature</span><span class="p">,</span>
            <span class="n">soft_border_C_windings</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
            <span class="n">temp_limit_case</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_case_temperature</span><span class="p">,</span>
            <span class="n">soft_border_C_case</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_scale</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">IDLE</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="si">}</span><span class="s2">[DephyActuator]&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_CONTROL_MODE_CONFIGS</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CONTROL_MODE_CONFIGS</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">DEPHY_LEGACY_CONTROL_MODE_CONFIGS</span>

    <span class="nd">@check_actuator_connection</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
                <span class="n">freq</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span><span class="p">,</span>
                <span class="n">log_level</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_debug_level</span><span class="p">,</span>
                <span class="n">log_enabled</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_dephy_log</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span><span class="si">}</span><span class="s2">] Need admin previleges to open the port &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="si">}</span><span class="s2">&#39;. </span><span class="se">\n\n</span><span class="s2"> </span><span class="se">\</span>
<span class="s2">                    Please run the script with &#39;sudo&#39; command or add the user to the dialout group.</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">_exit</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="c1"># TODO: Verify if we need this sleep here</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_control_mode</span><span class="p">(</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">VOLTAGE</span><span class="p">)</span>

    <span class="nd">@check_actuator_stream</span>
    <span class="nd">@check_actuator_open</span>
    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_control_mode</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">VOLTAGE</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_control_mode</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">CONTROL_MODES</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_model</span><span class="o">.</span><span class="n">T_c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case_temperature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_model</span><span class="o">.</span><span class="n">update_and_get_scale</span><span class="p">(</span>
            <span class="n">dt</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">,</span>
            <span class="n">motor_current</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">motor_current</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case_temperature</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_case_temperature</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span><span class="si">}</span><span class="s2">] Case thermal limit </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_case_temperature</span><span class="si">}</span><span class="s2"> reached. </span><span class="se">\</span>
<span class="s2">                    Stopping motor.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ThermalLimitException</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">winding_temperature</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_winding_temperature</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span><span class="si">}</span><span class="s2">] Winding thermal limit </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_winding_temperature</span><span class="si">}</span><span class="s2"> reached. </span><span class="se">\</span>
<span class="s2">                    Stopping motor.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ThermalLimitException</span><span class="p">()</span>
        <span class="c1"># Check for thermal fault, bit 2 of the execute status byte</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">status_ex</span> <span class="o">&amp;</span> <span class="mb">0b00000010</span> <span class="o">==</span> <span class="mb">0b00000010</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span><span class="si">}</span><span class="s2">] Thermal Fault: Winding temperature: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">winding_temperature</span><span class="si">}</span><span class="s2">; </span><span class="se">\</span>
<span class="s2">                    Case temperature: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">case_temperature</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="n">ThermalLimitException</span><span class="p">(</span><span class="s2">&quot;Internal thermal limit tripped.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_motor_current</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the motor current in mA.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (float): The current to set in mA.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_motor_command</span><span class="p">(</span><span class="n">ctrl_mode</span><span class="o">=</span><span class="n">c_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="nd">@deprecated_with_routing</span><span class="p">(</span><span class="n">alternative_func</span><span class="o">=</span><span class="n">set_motor_current</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_motor_command</span><span class="p">(</span><span class="n">ctrl_mode</span><span class="o">=</span><span class="n">c_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_motor_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the motor voltage in mV.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (float): The voltage to set in mV.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_motor_command</span><span class="p">(</span><span class="n">ctrl_mode</span><span class="o">=</span><span class="n">c_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="nd">@deprecated_with_routing</span><span class="p">(</span><span class="n">alternative_func</span><span class="o">=</span><span class="n">set_motor_voltage</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_motor_command</span><span class="p">(</span><span class="n">ctrl_mode</span><span class="o">=</span><span class="n">c_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_motor_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the motor position in radians.</span>
<span class="sd">        If in impedance mode, this sets the equilibrium angle in radians.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (float): The position to set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_motor_command</span><span class="p">(</span>
            <span class="n">ctrl_mode</span><span class="o">=</span><span class="n">c_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
            <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span>
                <span class="p">(</span><span class="n">value</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_zero_position</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_position_offset</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">RAD_PER_COUNT</span>
            <span class="p">),</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Q-axis motor voltage in mV.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">mot_volt</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_current</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">mot_cur</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Torque at the motor output in Nm.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">mot_cur</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">NM_PER_MILLIAMP</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Motor position in radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">mot_ang</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">RAD_PER_COUNT</span><span class="p">)</span>
                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_zero_position</span>
                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_position_offset</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_encoder_counts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Raw reading from motor encoder in counts.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">mot_ang</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_encoder_counts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Raw reading from joint encoder in counts.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">ank_ang</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Motor velocity in rad/s.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">mot_vel</span><span class="p">)</span> <span class="o">*</span> <span class="n">RAD_PER_DEG</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">motor_acceleration</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Motor acceleration in rad/s^2.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">mot_acc</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">battery_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Battery voltage in mV.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">batt_volt</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">battery_current</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Battery current in mA.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">batt_curr</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Joint position in radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">ank_ang</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">RAD_PER_COUNT</span><span class="p">)</span>
                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">joint_zero_position</span>
                <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">joint_position_offset</span>
            <span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">joint_direction</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Joint velocity in rad/s.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">ank_vel</span> <span class="o">*</span> <span class="n">RAD_PER_DEG</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">joint_direction</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">joint_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Torque at the joint output in Nm.</span>
<span class="sd">        This is calculated using motor current, k_t, and the gear ratio.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_torque</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">gear_ratio</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">case_temperature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Case temperature of the actuator in celsius.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">temperature</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">winding_temperature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ESTIMATED temperature of the windings in celsius.</span>
<span class="sd">        This is calculated based on the thermal model using motor current.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thermal_model</span><span class="o">.</span><span class="n">T_w</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">genvars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dephy&#39;s &#39;genvars&#39; object.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="nb">object</span><span class="o">=</span><span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">genvar_0</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">genvar_1</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">genvar_2</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">genvar_3</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">genvar_4</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">genvar_5</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning zeros&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">accelx</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Acceleration in x direction in m/s^2.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">accelx</span> <span class="o">*</span> <span class="n">M_PER_SEC_SQUARED_ACCLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">accely</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Acceleration in y direction in m/s^2.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">accely</span> <span class="o">*</span> <span class="n">M_PER_SEC_SQUARED_ACCLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">accelz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Acceleration in z direction in m/s^2.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">accelz</span> <span class="o">*</span> <span class="n">M_PER_SEC_SQUARED_ACCLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gyrox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Angular velocity in x direction in rad/s.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">gyrox</span> <span class="o">*</span> <span class="n">RAD_PER_SEC_GYROLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gyroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Angular velocity in y direction in rad/s.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">gyroy</span> <span class="o">*</span> <span class="n">RAD_PER_SEC_GYROLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_streaming</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_streaming</span>

    <span class="nd">@is_streaming</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">is_streaming</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_streaming</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_open</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_open</span>

    <span class="nd">@is_open</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">is_open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_open</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gyroz</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Angular velocity in z direction in rad/s.</span>
<span class="sd">        Measured using actpack&#39;s onboard IMU.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">gyroz</span> <span class="o">*</span> <span class="n">RAD_PER_SEC_GYROLSB</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Actuator data is none, please ensure that the actuator is connected and streaming. Returning 0.0.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="mf">0.0</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.accelx" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">accelx</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.accelx" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Acceleration in x direction in m/s^2.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.accely" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">accely</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.accely" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Acceleration in y direction in m/s^2.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.accelz" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">accelz</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.accelz" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Acceleration in z direction in m/s^2.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.battery_current" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">battery_current</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.battery_current" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Battery current in mA.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.battery_voltage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">battery_voltage</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.battery_voltage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Battery voltage in mV.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.case_temperature" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">case_temperature</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.case_temperature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Case temperature of the actuator in celsius.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.genvars" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">genvars</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.genvars" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Dephy's 'genvars' object.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.gyrox" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gyrox</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.gyrox" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Angular velocity in x direction in rad/s.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.gyroy" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gyroy</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.gyroy" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Angular velocity in y direction in rad/s.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.gyroz" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gyroz</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.gyroz" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Angular velocity in z direction in rad/s.
Measured using actpack's onboard IMU.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.joint_encoder_counts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">joint_encoder_counts</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.joint_encoder_counts" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Raw reading from joint encoder in counts.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.joint_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">joint_position</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.joint_position" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Joint position in radians.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.joint_torque" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">joint_torque</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.joint_torque" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Torque at the joint output in Nm.
This is calculated using motor current, k_t, and the gear ratio.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.joint_velocity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">joint_velocity</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.joint_velocity" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Joint velocity in rad/s.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.motor_acceleration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">motor_acceleration</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.motor_acceleration" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Motor acceleration in rad/s^2.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.motor_encoder_counts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">motor_encoder_counts</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.motor_encoder_counts" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Raw reading from motor encoder in counts.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.motor_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">motor_position</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.motor_position" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Motor position in radians.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.motor_torque" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">motor_torque</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.motor_torque" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Torque at the motor output in Nm.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.motor_velocity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">motor_velocity</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.motor_velocity" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Motor velocity in rad/s.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.motor_voltage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">motor_voltage</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.motor_voltage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Q-axis motor voltage in mV.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="opensourceleg.actuators.DephyLegacyActuator.winding_temperature" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">winding_temperature</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#opensourceleg.actuators.DephyLegacyActuator.winding_temperature" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>ESTIMATED temperature of the windings in celsius.
This is calculated based on the thermal model using motor current.</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyLegacyActuator.set_motor_current" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_motor_current</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyLegacyActuator.set_motor_current" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the motor current in mA.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>value</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current to set in mA.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_motor_current</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the motor current in mA.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (float): The current to set in mA.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_motor_command</span><span class="p">(</span><span class="n">ctrl_mode</span><span class="o">=</span><span class="n">c_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyLegacyActuator.set_motor_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_motor_position</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyLegacyActuator.set_motor_position" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the motor position in radians.
If in impedance mode, this sets the equilibrium angle in radians.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>value</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position to set</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_motor_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the motor position in radians.</span>
<span class="sd">    If in impedance mode, this sets the equilibrium angle in radians.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (float): The position to set</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_motor_command</span><span class="p">(</span>
        <span class="n">ctrl_mode</span><span class="o">=</span><span class="n">c_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
        <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span>
            <span class="p">(</span><span class="n">value</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_zero_position</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">motor_position_offset</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">MOTOR_CONSTANTS</span><span class="o">.</span><span class="n">RAD_PER_COUNT</span>
        <span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.DephyLegacyActuator.set_motor_voltage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_motor_voltage</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.DephyLegacyActuator.set_motor_voltage" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Sets the motor voltage in mV.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>value</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The voltage to set in mV.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/actuators/dephy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_motor_voltage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the motor voltage in mV.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (float): The voltage to set in mV.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_motor_command</span><span class="p">(</span><span class="n">ctrl_mode</span><span class="o">=</span><span class="n">c_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="opensourceleg.actuators.ThermalModel" class="doc doc-heading">
            <code>ThermalModel</code>


<a href="#opensourceleg.actuators.ThermalModel" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


        <p>Thermal model of a motor developed by Jianping Lin and Gray C. Thomas
@U-M Locomotion Lab, directed by Dr. Robert Gregg</p>


<details class="assumptions" open>
  <summary>Assumptions</summary>
  <p>1: The motor is a lumped system with two thermal nodes: the winding and the case.
2: The winding and the case are assumed to be in thermal equilibrium with the ambient.
3: The winding and the case are assumed to be in thermal equilibrium with each other.</p>
</details>

<details class="equations" open>
  <summary>Equations</summary>
  <p>1: C_w * dT_w/dt = (I^2)R + (T_c-T_w)/R_WC
2: C_c * dT_c/dt = (T_w-T_c)/R_WC + (T_w-T_a)/R_CA</p>
</details>

<details class="where" open>
  <summary>where</summary>
  <p>C_w: Thermal capacitance of the winding
C_c: Thermal capacitance of the case
R_WC: Thermal resistance between the winding and the case
R_CA: Thermal resistance between the case and the ambient
T_w: Temperature of the winding
T_c: Temperature of the case
T_a: Temperature of the ambient
I: Current
R: Resistance</p>
</details>

<details class="implementation" open>
  <summary>Implementation</summary>
  <p>1: The model is updated at every time step with the current and the ambient temperature.
2: The model can be used to predict the temperature of the winding and the case at any time step.
3: The model can also be used to scale the torque based on the temperature of the winding and the case.</p>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>ambient</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Ambient temperature in Celsius. Defaults to 21.</p>
              </div>
            </td>
            <td>
                  <code>21</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>params</code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of parameters. Defaults to dict().</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>temp_limit_windings</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum temperature of the windings in Celsius. Defaults to 115.</p>
              </div>
            </td>
            <td>
                  <code>115</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>soft_border_C_windings</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Soft border of the windings in Celsius. Defaults to 15.</p>
              </div>
            </td>
            <td>
                  <code>15</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>temp_limit_case</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum temperature of the case in Celsius. Defaults to 80.</p>
              </div>
            </td>
            <td>
                  <code>80</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>soft_border_C_case</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Soft border of the case in Celsius. Defaults to 5.</p>
              </div>
            </td>
            <td>
                  <code>5</code>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>opensourceleg/math/math.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ThermalModel</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Thermal model of a motor developed by Jianping Lin and Gray C. Thomas</span>
<span class="sd">    @U-M Locomotion Lab, directed by Dr. Robert Gregg</span>

<span class="sd">    Assumptions:</span>
<span class="sd">        1: The motor is a lumped system with two thermal nodes: the winding and the case.</span>
<span class="sd">        2: The winding and the case are assumed to be in thermal equilibrium with the ambient.</span>
<span class="sd">        3: The winding and the case are assumed to be in thermal equilibrium with each other.</span>

<span class="sd">    Equations:</span>
<span class="sd">        1: C_w * dT_w/dt = (I^2)R + (T_c-T_w)/R_WC</span>
<span class="sd">        2: C_c * dT_c/dt = (T_w-T_c)/R_WC + (T_w-T_a)/R_CA</span>

<span class="sd">    where:</span>
<span class="sd">        C_w: Thermal capacitance of the winding</span>
<span class="sd">        C_c: Thermal capacitance of the case</span>
<span class="sd">        R_WC: Thermal resistance between the winding and the case</span>
<span class="sd">        R_CA: Thermal resistance between the case and the ambient</span>
<span class="sd">        T_w: Temperature of the winding</span>
<span class="sd">        T_c: Temperature of the case</span>
<span class="sd">        T_a: Temperature of the ambient</span>
<span class="sd">        I: Current</span>
<span class="sd">        R: Resistance</span>

<span class="sd">    Implementation:</span>
<span class="sd">        1: The model is updated at every time step with the current and the ambient temperature.</span>
<span class="sd">        2: The model can be used to predict the temperature of the winding and the case at any time step.</span>
<span class="sd">        3: The model can also be used to scale the torque based on the temperature of the winding and the case.</span>

<span class="sd">    Args:</span>
<span class="sd">        ambient (float): Ambient temperature in Celsius. Defaults to 21.</span>
<span class="sd">        params (dict): Dictionary of parameters. Defaults to dict().</span>
<span class="sd">        temp_limit_windings (float): Maximum temperature of the windings in Celsius. Defaults to 115.</span>
<span class="sd">        soft_border_C_windings (float): Soft border of the windings in Celsius. Defaults to 15.</span>
<span class="sd">        temp_limit_case (float): Maximum temperature of the case in Celsius. Defaults to 80.</span>
<span class="sd">        soft_border_C_case (float): Soft border of the case in Celsius. Defaults to 5.</span>


<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ambient</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">21</span><span class="p">,</span>
        <span class="n">params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">temp_limit_windings</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">115</span><span class="p">,</span>
        <span class="n">soft_border_C_windings</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
        <span class="n">temp_limit_case</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">80</span><span class="p">,</span>
        <span class="n">soft_border_C_case</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># The following parameters result from Jack Schuchmann&#39;s test with no fans</span>
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">C_w</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.20</span> <span class="o">*</span> <span class="mf">81.46202695970649</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">R_WC</span> <span class="o">=</span> <span class="mf">1.0702867186480716</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">C_c</span> <span class="o">=</span> <span class="mf">512.249065845453</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">R_CA</span> <span class="o">=</span> <span class="mf">1.9406620046327363</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">α</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.393</span> <span class="o">*</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">100</span>  <span class="c1"># Pure copper. Taken from thermalmodel3.py</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">R_T_0</span> <span class="o">=</span> <span class="mi">65</span>  <span class="c1"># temp at which resistance was measured</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">R_ϕ_0</span> <span class="o">=</span> <span class="mf">0.376</span>  <span class="c1"># emirical, from the computed resistance (q-axis voltage/ q-axis current). Ohms</span>

        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">ambient</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">ambient</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_a</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">ambient</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">soft_max_temp_windings</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">temp_limit_windings</span> <span class="o">-</span> <span class="n">soft_border_C_windings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_windings</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">temp_limit_windings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">soft_border_windings</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">soft_border_C_windings</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">soft_max_temp_case</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">temp_limit_case</span> <span class="o">-</span> <span class="n">soft_border_C_case</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_case</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">temp_limit_case</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">soft_border_case</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">soft_border_C_case</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;ThermalModel&quot;</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">200</span><span class="p">,</span> <span class="n">motor_current</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the temperature of the winding and the case based on the current and the ambient temperature.</span>

<span class="sd">        Args:</span>
<span class="sd">            dt (float): Time step in seconds. Defaults to 1/200.</span>
<span class="sd">            motor_current (float): Motor current in mA. Defaults to 0.</span>

<span class="sd">        Dynamics:</span>
<span class="sd">            1: self.C_w * d self.T_w /dt = (I^2)R + (self.T_c-self.T_w)/self.R_WC</span>
<span class="sd">            2: self.C_c * d self.T_c /dt = (self.T_w-self.T_c)/self.R_WC + (self.T_w-self.T_a)/self.R_CA</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">I_q_des</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">motor_current</span> <span class="o">*</span> <span class="mf">1e-3</span>

        <span class="n">I2R</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">I_q_des</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_ϕ_0</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">α</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_T_0</span><span class="p">))</span>
        <span class="p">)</span>  <span class="c1"># accounts for resistance change due to temp.</span>

        <span class="n">dTw_dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">I2R</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_WC</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_w</span>
        <span class="n">dTc_dt</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_WC</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_a</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_CA</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">dTw_dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">dTc_dt</span>

    <span class="k">def</span> <span class="nf">update_and_get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">motor_current</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">FOS</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the temperature of the winding and the case based on the current and</span>
<span class="sd">        the ambient temperature and returns the scale factor for the torque.</span>

<span class="sd">        Args:</span>
<span class="sd">            dt (float): Time step in seconds.</span>
<span class="sd">            motor_current (float): Motor current in mA. Defaults to 0.</span>
<span class="sd">            FOS (float): Factor of safety. Defaults to 3.0.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Scale factor for the torque.</span>

<span class="sd">        Dynamics:</span>
<span class="sd">            1: self.C_w * d self.T_w /dt = (I^2)R + (self.T_c-self.T_w)/self.R_WC</span>
<span class="sd">            2: self.C_c * d self.T_c /dt = (self.T_w-self.T_c)/self.R_WC + (self.T_w-self.T_a)/self.R_CA</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">I_q_des</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">motor_current</span> <span class="o">*</span> <span class="mf">1e-3</span>

        <span class="n">I2R_des</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">FOS</span> <span class="o">*</span> <span class="n">I_q_des</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_ϕ_0</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">α</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_T_0</span><span class="p">))</span>
        <span class="p">)</span>  <span class="c1"># accounts for resistance change due to temp.</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_windings</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">soft_max_temp_windings</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">*=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_windings</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_windings</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">soft_max_temp_windings</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_case</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">soft_max_temp_case</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">*=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_case</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_case</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">soft_max_temp_case</span><span class="p">)</span>

        <span class="n">I2R</span> <span class="o">=</span> <span class="n">I2R_des</span> <span class="o">*</span> <span class="n">scale</span>

        <span class="n">dTw_dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">I2R</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_WC</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_w</span>
        <span class="n">dTc_dt</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_WC</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_a</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_CA</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_c</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">dTw_dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">dTc_dt</span>

        <span class="k">if</span> <span class="n">scale</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.0</span>

        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">scale</span><span class="p">))</span>  <span class="c1"># this is how much the torque should be scaled</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.ThermalModel.update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update</span><span class="p">(</span><span class="n">dt</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">200</span><span class="p">,</span> <span class="n">motor_current</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.ThermalModel.update" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Updates the temperature of the winding and the case based on the current and the ambient temperature.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>dt</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Time step in seconds. Defaults to 1/200.</p>
              </div>
            </td>
            <td>
                  <code>1 / 200</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>motor_current</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Motor current in mA. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="dynamics" open>
  <summary>Dynamics</summary>
  <p>1: self.C_w * d self.T_w /dt = (I^2)R + (self.T_c-self.T_w)/self.R_WC
2: self.C_c * d self.T_c /dt = (self.T_w-self.T_c)/self.R_WC + (self.T_w-self.T_a)/self.R_CA</p>
</details>
            <details class="quote">
              <summary>Source code in <code>opensourceleg/math/math.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">200</span><span class="p">,</span> <span class="n">motor_current</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the temperature of the winding and the case based on the current and the ambient temperature.</span>

<span class="sd">    Args:</span>
<span class="sd">        dt (float): Time step in seconds. Defaults to 1/200.</span>
<span class="sd">        motor_current (float): Motor current in mA. Defaults to 0.</span>

<span class="sd">    Dynamics:</span>
<span class="sd">        1: self.C_w * d self.T_w /dt = (I^2)R + (self.T_c-self.T_w)/self.R_WC</span>
<span class="sd">        2: self.C_c * d self.T_c /dt = (self.T_w-self.T_c)/self.R_WC + (self.T_w-self.T_a)/self.R_CA</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">I_q_des</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">motor_current</span> <span class="o">*</span> <span class="mf">1e-3</span>

    <span class="n">I2R</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">I_q_des</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_ϕ_0</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">α</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_T_0</span><span class="p">))</span>
    <span class="p">)</span>  <span class="c1"># accounts for resistance change due to temp.</span>

    <span class="n">dTw_dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">I2R</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_WC</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_w</span>
    <span class="n">dTc_dt</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_WC</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_a</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_CA</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_c</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">dTw_dt</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">dTc_dt</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opensourceleg.actuators.ThermalModel.update_and_get_scale" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_and_get_scale</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">motor_current</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">FOS</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.ThermalModel.update_and_get_scale" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Updates the temperature of the winding and the case based on the current and
the ambient temperature and returns the scale factor for the torque.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>dt</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Time step in seconds.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>motor_current</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Motor current in mA. Defaults to 0.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>FOS</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Factor of safety. Defaults to 3.0.</p>
              </div>
            </td>
            <td>
                  <code>1.0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Scale factor for the torque.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="dynamics" open>
  <summary>Dynamics</summary>
  <p>1: self.C_w * d self.T_w /dt = (I^2)R + (self.T_c-self.T_w)/self.R_WC
2: self.C_c * d self.T_c /dt = (self.T_w-self.T_c)/self.R_WC + (self.T_w-self.T_a)/self.R_CA</p>
</details>
            <details class="quote">
              <summary>Source code in <code>opensourceleg/math/math.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_and_get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">motor_current</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">FOS</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the temperature of the winding and the case based on the current and</span>
<span class="sd">    the ambient temperature and returns the scale factor for the torque.</span>

<span class="sd">    Args:</span>
<span class="sd">        dt (float): Time step in seconds.</span>
<span class="sd">        motor_current (float): Motor current in mA. Defaults to 0.</span>
<span class="sd">        FOS (float): Factor of safety. Defaults to 3.0.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Scale factor for the torque.</span>

<span class="sd">    Dynamics:</span>
<span class="sd">        1: self.C_w * d self.T_w /dt = (I^2)R + (self.T_c-self.T_w)/self.R_WC</span>
<span class="sd">        2: self.C_c * d self.T_c /dt = (self.T_w-self.T_c)/self.R_WC + (self.T_w-self.T_a)/self.R_CA</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">I_q_des</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">motor_current</span> <span class="o">*</span> <span class="mf">1e-3</span>

    <span class="n">I2R_des</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">FOS</span> <span class="o">*</span> <span class="n">I_q_des</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_ϕ_0</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">α</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_T_0</span><span class="p">))</span>
    <span class="p">)</span>  <span class="c1"># accounts for resistance change due to temp.</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_windings</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">soft_max_temp_windings</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">*=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_windings</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_windings</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">soft_max_temp_windings</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_case</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">soft_max_temp_case</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">*=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_case</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abs_max_temp_case</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">soft_max_temp_case</span><span class="p">)</span>

    <span class="n">I2R</span> <span class="o">=</span> <span class="n">I2R_des</span> <span class="o">*</span> <span class="n">scale</span>

    <span class="n">dTw_dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">I2R</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_WC</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_w</span>
    <span class="n">dTc_dt</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_WC</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_a</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">R_CA</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">C_c</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">T_w</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">dTw_dt</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">T_c</span> <span class="o">+=</span> <span class="n">dt</span> <span class="o">*</span> <span class="n">dTc_dt</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>
    <span class="k">if</span> <span class="n">scale</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">1.0</span>

    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">scale</span><span class="p">))</span>  <span class="c1"># this is how much the torque should be scaled</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="opensourceleg.actuators.deprecated_with_routing" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deprecated_with_routing</span><span class="p">(</span><span class="n">alternative_func</span><span class="p">)</span></code>

<a href="#opensourceleg.actuators.deprecated_with_routing" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">

        <p>Decorator to provide an alternative function for a deprecated function. The alternative function will be called
instead of the deprecated function.</p>

            <details class="quote">
              <summary>Source code in <code>opensourceleg/logging/decorators.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">deprecated_with_routing</span><span class="p">(</span><span class="n">alternative_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decorator to provide an alternative function for a deprecated function. The alternative function will be called</span>
<span class="sd">    instead of the deprecated function.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">:</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Function `</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">` is deprecated. Please use `</span><span class="si">{</span><span class="n">alternative_func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">` instead, &quot;</span>
                <span class="s2">&quot;which will be called automatically now.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">alternative_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">wrapper</span>

    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Maintained by <a href="https://github.com/senthurayyappan">Senthur Ayyappan</a>.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/neurobionics/opensourceleg" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/opensourceleg" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>